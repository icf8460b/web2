!function(t){"use strict";function e(t){return t*Math.PI/180}function n(t){return 180*t/Math.PI}class s{constructor(t,e){this.x=t,this.y=e}}class r{constructor(t,e,n,s,r,i,o){this.s=t,this.t11=e,this.t12=n,this.t13=s,this.t21=r,this.t22=i,this.t23=o}static translate(t,e){return new r(1,1,0,t,0,1,e)}static scale(t){return new r(t,t,0,0,0,t,0)}static scaleAround(t,e){return r.translate(-t.x,-t.y).then(r.scale(e)).then(r.translate(t.x,t.y))}static rotate(t){let e=Math.cos(t),n=Math.sin(t);return 1===Math.abs(e)?n=0:1===Math.abs(n)&&(e=0),new r(1,e,-n,0,n,e,0)}static rotateAround(t,e){return r.translate(-t.x,-t.y).then(r.rotate(e)).then(r.translate(t.x,t.y))}rotation(){return Math.atan2(+this.t21,+this.t11)}scale(){return this.s}multiply(t){const e=this.s*t.s,n=this.t11*t.t11+this.t12*t.t21,s=this.t11*t.t12+this.t12*t.t22,i=this.t11*t.t13+this.t12*t.t23+this.t13,o=this.t21*t.t11+this.t22*t.t21,a=this.t21*t.t12+this.t22*t.t22,h=this.t21*t.t13+this.t22*t.t23+this.t23;return new r(e,n,s,i,o,a,h)}then(t){return t.multiply(this)}transformPoint(t){return{x:this.t11*t.x+this.t12*t.y+this.t13,y:this.t21*t.x+this.t22*t.y+this.t23}}}class i{constructor(t,e,n,s,r=0){this.top=t,this.left=e,this.height=n,this.width=s,this.rotation=r}static fromCenterBox({center:t,width:e,height:n,rotation:s}){return new i(t.y-n/2,t.x-e/2,n,e,s)}growAroundToContainPoints(t,e,n=1e-10){const s=this.scaleAroundToContain(t,e,n);return this.transform(r.scaleAround(t,s))}scaleAroundToContain(t,n,s){const i=r.translate(-t.x,-t.y).then(r.rotate(e(-this.rotation))),[o,,,a]=this.corners(),[h,c]=[i.transformPoint(o),i.transformPoint(a)],l=h.x,u=h.y,d=c.x,f=c.y;let m=0,x=0,w=0,y=0;for(const t of n){const e=i.transformPoint(t);m=Math.min(m,e.x),w=Math.min(w,e.y),x=Math.max(x,e.x),y=Math.max(y,e.y)}let g=0;return m<-s&&(g=Math.max(g,m/l)),w<-s&&(g=Math.max(g,w/u)),x>s&&(g=Math.max(g,x/d)),y>s&&(g=Math.max(g,y/f)),g}center(){return new s(this.left+this.width/2,this.top+this.height/2)}corners(){const t=this.left,n=this.top,i=this.left+this.width,o=this.top+this.height;if(0===this.rotation)return[new s(t,n),new s(i,n),new s(t,o),new s(i,o)];{const a=r.rotateAround(this.center(),e(this.rotation));return[a.transformPoint(new s(t,n)),a.transformPoint(new s(i,n)),a.transformPoint(new s(t,o)),a.transformPoint(new s(i,o))]}}fromCssBasis(){const t=this.center();return r.translate(-t.x+this.left,-t.y+this.top).then(r.rotate(e(this.rotation))).then(r.translate(t.x,t.y))}transform(t){const e=t.transformPoint(this.center()),s=t.scale(),r=this.width*s,o=this.height*s,a=this.rotation+n(t.rotation());return i.fromCenterBox({center:e,width:r,height:o,rotation:a})}}function o(t){const{containerWidth:e,containerHeight:n}=t.dataset;if(!e||!n)return;const s=new i(0,0,parseFloat(n),parseFloat(e)),{imageboxWidth:o,imageboxHeight:a,imageboxTop:h,imageboxLeft:c,imageboxRotation:l}=t.dataset;if(!(o&&a&&h&&c&&l))return;const u=new i(parseFloat(h),parseFloat(c),parseFloat(a),parseFloat(o),parseFloat(l)),{width:d,height:f}=t.parentElement.getBoundingClientRect(),m={x:d/2,y:f/2},x=new i(0,0,f,d).corners(),w=r.translate(m.x-s.width/2,m.y-s.height/2),y=u.transform(s.fromCssBasis()).transform(w).growAroundToContainPoints(m,x);t.style.top=`${y.top}px`,t.style.left=`${y.left}px`,t.style.width=`${y.width}px`,t.style.height=`${y.height}px`}function a(){const t=Array.from(document.querySelectorAll(".scale_rotated_fill")),e=()=>t.forEach(o);window.addEventListener("resize",e),e()}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a(),t.degreesToRadians=e,t.radiansToDegrees=n,t.scaleRotatedFill=o,Object.defineProperty(t,"__esModule",{value:!0})}({});
